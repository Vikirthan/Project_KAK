<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vendor Dashboard â€“ KAK | LPU</title>
    <meta name="description"
        content="Vendor Manager dashboard â€” monitor supervisor performance and hygiene metrics across LPU." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="vendor.css" />
</head>

<body class="vendor-page">

    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <!-- BLOCK WISE RANKING SIDEBAR -->
    <aside class="ranking-sidebar">
        <h3 class="sidebar-title">Block Wise Ranking</h3>
        <div id="ranking-sidebar-list">
            <!-- Ranking items injected by JS -->
            <div style="text-align: center; color: var(--text-muted); font-size: 12px; padding: 10px;">
                Loading rankings...
            </div>
        </div>
    </aside>

    <!-- NAVBAR -->
    <nav class="top-nav">
        <div class="nav-brand">
            <div class="nav-logo">ðŸ‘”</div>
            <div>
                <span class="nav-title">KAK â€“ Vendor</span>
                <span class="nav-sub">LPU Management Suite</span>
            </div>
        </div>
        <div class="nav-user">
            <div class="nav-user-info">
                <span class="nav-user-name" id="nav-name">Vendor Manager</span>
                <span class="nav-user-uid">UID: VENDOR-01</span>
            </div>
            <button class="btn-logout" id="btn-logout" title="Logout"
                style="display:flex; align-items:center; gap:8px; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.25); color: #fca5a5; padding: 8px 16px; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 13px;">
                <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    <polyline points="16,17 21,12 16,7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                <span>Logout</span>
            </button>
        </div>
    </nav>

    <main class="vendor-main">

        <!-- Critical Alerts -->
        <div id="alerts-container"></div>

        <!-- Stats Overview -->
        <section class="stats-grid">
            <div class="stat-card">
                <span class="stat-lbl">Total Supervisors</span>
                <span class="stat-val" id="stat-total-sup">0</span>
            </div>
            <div class="stat-card stat-success">
                <span class="stat-lbl">Avg. Rating</span>
                <span class="stat-val" id="stat-avg-rating">â€“</span>
            </div>
            <div class="stat-card stat-danger">
                <span class="stat-lbl">Total Black Points</span>
                <span class="stat-val" id="stat-total-bp">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-lbl">Total Received</span>
                <span class="stat-val" id="stat-total-received">0</span>
            </div>
            <div class="stat-card stat-success">
                <span class="stat-lbl">Resolved On-Time</span>
                <span class="stat-val" id="stat-total-ontime">0</span>
            </div>
            <div class="stat-card stat-danger">
                <span class="stat-lbl">Missed / Escalated</span>
                <span class="stat-val" id="stat-total-missed">0</span>
            </div>
        </section>

        <!-- Escalated Quality Disputes -->
        <section class="vendor-section" id="escalated-section" style="display:none">
            <div class="section-header">
                <h2 class="section-title">ðŸ‘® Escalated Quality Disputes (AO Reported)</h2>
                <span class="section-badge badge-red" id="badge-escalated">0</span>
            </div>
            <div class="dispute-list" id="dispute-list">
                <!-- Escalated cards injected here -->
            </div>
        </section>

        <!-- Supervisor Performance Rankings -->
        <section class="vendor-section">
            <div class="section-header">
                <h2 class="section-title">ðŸ“Š Supervisor Performance Rankings</h2>
            </div>

            <div class="ranking-list" id="ranking-list">
                <!-- Rank cards injected here -->
            </div>

            <div class="empty-state" id="empty-ranking" style="display:none">
                <div class="empty-icon">ðŸ“‚</div>
                <p>No supervisor data found.</p>
            </div>
        </section>

    </main>

    <!-- Supabase Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-init.js"></script>
    <script src="../js/supabase.js"></script>
    <script src="../js/app.js"></script>
    <script src="vendor.js"></script>
</body>

</html>